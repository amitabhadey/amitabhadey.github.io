{%- comment -%}
Renders a single card item from site.data.resources (format=card)

Expected keys on `item`:
- title (string, required)
- url (string, required)
- meta (string, optional)
- desc (string, optional)
- tags (string, optional, space-separated)

Usage:
  {% include resource_card.html item=row %}
{%- endcomment -%}

{%- assign href = item.url | to_s | strip -%}
{%- unless href contains '://' -%}
  {%- assign href = 'https://' | append: href -%}
{%- endunless -%}

{%- if item.title and href -%}
<li class="card" {%- if item.tags -%} data-tags="{{ item.tags | escape }}"{%- endif -%}>
  <h4>
    <a href="{{ href | escape }}" target="_blank" rel="noopener"
       title="{{ item.title | strip | escape }}">{{ item.title | strip }}</a>
  </h4>

  {%- if item.meta and item.meta != 'â€”' and item.meta != '-' -%}
  <div class="meta">{{ item.meta }}</div>
  {%- endif -%}

  {%- if item.desc -%}
  <p>{{ item.desc }}</p>
  {%- endif -%}

  <div class="actions">
    <a href="{{ href | escape }}" target="_blank" rel="noopener">Open</a>
    <button data-copy="{{ href | escape }}">Copy link</button>
  </div>
</li>
{%- endif -%}
